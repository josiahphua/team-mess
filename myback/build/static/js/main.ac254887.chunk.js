(this["webpackJsonpmessy-go-where-frontend"]=this["webpackJsonpmessy-go-where-frontend"]||[]).push([[0],{100:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),s=a.n(c),i=(a(100),a(101),a(15)),o=a(10),u=a(6),l=a.n(u),j=a(11),b=a(8),h=a(14),d=a(17),p=a(28),x=a(157),O=a(158),f=a(173),m=a(1);var v=function(e){var t=e.resolved,a=Object(d.g)(),n=Object(p.a)(t);return n.reverse(),Object(m.jsxs)(x.a,{className:"border",children:[Object(m.jsx)(O.a,{className:"text-center",children:Object(m.jsx)("h5",{children:"Resolved and Closed Issues"})}),n.length>0?Object(m.jsx)(O.a,{className:"d-flex flex-row flex-nowrap overflow-auto",children:n.map((function(e,t){return Object(m.jsxs)(f.a,{className:"text-center",style:{width:"14rem"},children:[Object(m.jsx)(f.a.Header,{children:e.issueType}),Object(m.jsx)(f.a.Img,{variant:"top",src:e.picture,style:{width:"100%",height:"150px",margin:"auto"}}),Object(m.jsx)(f.a.Body,{children:e.description}),Object(m.jsx)(f.a.Footer,{children:Object(m.jsxs)("small",{className:"text-muted",children:["Status: ",e.issueStatus]})}),Object(m.jsx)("a",{className:"stretched-link",style:{cursor:"pointer"},onClick:function(){return function(e){a.push("/api/cases/pending/".concat(e))}(e._id)}})]},t)}))}):Object(m.jsxs)("div",{children:[" No Closed Issues! ",Object(m.jsx)(h.c,{to:"/case/submit",children:"Click here to submit"})]}),Object(m.jsx)("br",{})]})};var g=function(e){var t=e.pending,a=Object(d.g)(),n=Object(p.a)(t);return n.reverse(),Object(m.jsxs)(x.a,{className:"border",children:[Object(m.jsx)(O.a,{className:"text-center",children:Object(m.jsx)("h5",{children:"Open and In Progress Issues"})}),n.length>0?Object(m.jsx)(O.a,{className:"d-flex flex-row flex-nowrap overflow-auto",children:n.map((function(e,t){return Object(m.jsxs)(f.a,{className:"text-center",style:{width:"14rem"},children:[Object(m.jsx)(f.a.Header,{children:e.issueType}),Object(m.jsx)(f.a.Img,{variant:"top",src:e.picture,style:{width:"80%",height:"150px",margin:"auto"}}),Object(m.jsx)(f.a.Body,{children:e.description}),Object(m.jsx)(f.a.Footer,{children:Object(m.jsxs)("small",{className:"text-muted",children:["Status: ",e.issueStatus]})}),Object(m.jsx)("a",{className:"stretched-link",style:{cursor:"pointer"},onClick:function(){return function(e){a.push("/api/cases/pending/".concat(e))}(e._id)}})]},t)}))}):Object(m.jsxs)("div",{children:[" No Pending Issues! ",Object(m.jsx)(h.c,{to:"/case/submit",children:"Click here to submit"})]}),Object(m.jsx)("br",{})]})},y=a(12),k=a.n(y);var w=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),a=t[0],r=t[1],c=[],s=Object(d.g)();return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/issue/staff/open",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,a=t.data,e.next=7,r(a.globalOpenIssues);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a&&(c=Object(p.a)(a)).reverse(),Object(m.jsxs)(x.a,{className:"border",children:[Object(m.jsx)(O.a,{className:"text-center",children:Object(m.jsx)("h5",{children:"Open Issues"})}),c&&c.length>0?Object(m.jsx)(O.a,{className:"d-flex flex-row flex-nowrap overflow-auto",children:c.map((function(e,t){return Object(m.jsxs)(f.a,{className:"text-center",style:{width:"14rem"},children:[Object(m.jsx)(f.a.Header,{children:e.issueType}),Object(m.jsx)(f.a.Img,{variant:"top",src:e.picture,style:{width:"100%",height:"150px",margin:"auto"}}),Object(m.jsx)(f.a.Body,{children:e.description}),Object(m.jsx)(f.a.Footer,{children:Object(m.jsxs)("small",{className:"text-muted",children:["Status: ",e.issueStatus]})}),Object(m.jsx)("a",{className:"stretched-link",style:{cursor:"pointer"},onClick:function(){return function(e){s.push("/api/cases/pending/".concat(e))}(e._id)}})]},t)}))}):Object(m.jsx)("div",{children:" No Open Issues."}),Object(m.jsx)("br",{})]})};var S=function(e){var t=e.user,a=e.pending,n=e.resolved;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:t&&"Staff"===t.userType?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsx)("br",{})]}):""}),Object(m.jsx)("div",{children:Object(m.jsx)(g,{pending:a})}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsx)(v,{resolved:n})})]})},C=a(21),I=a(83),N=a(160),B=a(166),T=a(167),P=a(163),F=a(161),A=a(18),D=a(170),L=a(169),R=a(162),G=a(172);function U(e){var t=e.issue,a=Object(n.useState)(2),r=Object(b.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(-1),o=Object(b.a)(i,2),u=(o[0],o[1]),h=Object(d.g)();function p(){return(p=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/issue/iRating/".concat(t),{rating:c},{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:h.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(m.jsxs)(O.a,{children:[Object(m.jsx)(I.a,{children:Object(m.jsx)(G.a,{name:"hover-feedback",value:c,size:"large",onChange:function(e,t){s(t)},onChangeActive:function(e,t){u(t)}})}),Object(m.jsx)(I.a,{children:Object(m.jsx)(N.a,{onClick:function(){return function(e){return p.apply(this,arguments)}(t._id)},children:" Submit Rating"})})]})}var E=function(e){var t=e.issue;return Object(m.jsx)("div",{children:Object(m.jsx)(G.a,{name:"read-only",value:t.rating,size:"large",readOnly:!0})})};var z=function(e){var t=e.user,a=Object(d.g)(),r=Object(n.useState)({}),c=Object(b.a)(r,2),s=c[0],o=c[1],u=Object(n.useState)("Panel1"),h=Object(b.a)(u,2),p=h[0],v=h[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),w=y[0],S=y[1],G=Object(n.useState)(!1),z=Object(b.a)(G,2),H=z[0],q=z[1],_=Object(n.useState)(),J=Object(b.a)(_,2),V=J[0],W=J[1],Y="dummy",$=function(){return S(!1)},M=function(){return q(!1)},K=Object(d.h)(),Q=[];Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/issue/single/".concat(K.id),{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,a=t.data,e.next=7,o(a.singleIssue);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var X=Object(F.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}))(),Z=Object(A.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(D.a),ee=Object(A.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(L.a),te=Object(A.a)((function(e){return{root:{padding:e.spacing(2)}}}))(R.a);function ae(){return(ae=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/issue/iDeleted/".concat(t),V,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:a.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ne(){return(ne=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/issue/iAccept/".concat(t),Y,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:a.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function re(){return(re=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/issue/iResolved/".concat(t),V,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:a.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ce(e){W((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))}return Q=s.updates,Object(m.jsx)(x.a,{children:Object(m.jsx)(O.a,{children:Object(m.jsxs)(I.a,{md:6,children:[Object(m.jsxs)(f.a,{children:[Object(m.jsxs)(f.a.Header,{children:["Status: ",s.issueStatus]}),Object(m.jsxs)(f.a.Header,{children:["Category: ",s.issueType]}),Object(m.jsx)(f.a.Img,{variant:"top",src:s.picture,style:{width:"80%",margin:"auto"}}),Object(m.jsxs)(f.a.Body,{children:[Object(m.jsx)(f.a.Title,{children:"Description"}),Object(m.jsx)(f.a.Text,{children:s.description}),Object(m.jsx)(f.a.Title,{children:"Location"}),Object(m.jsx)(f.a.Text,{children:s.location}),Object(m.jsx)(f.a.Title,{children:"Submission Date & Time"}),Object(m.jsxs)(f.a.Text,{children:[s.date," / ",s.time]}),Object(m.jsx)(f.a.Title,{children:"Issue Updates"}),Object(m.jsx)("div",{children:Q&&Q.map((function(e,t){return Object(m.jsxs)(Z,{square:!0,expanded:p==="panel".concat(t+1),onChange:(a="panel".concat(t+1),function(e,t){v(!!t&&a)}),children:[Object(m.jsxs)(ee,{"aria-controls":"panel".concat(t+1,"d-content"),id:"panel".concat(t+1,"d-header"),children:[Object(m.jsx)(P.a,{className:X.heading,children:e.updateStatus}),Object(m.jsxs)(P.a,{className:X.secondaryHeading,children:[e.date," / ",e.time]})]}),Object(m.jsx)(te,{children:Object(m.jsx)(P.a,{children:e.updateDescription})})]});var a}))}),Object(m.jsx)("br",{}),t&&"User"===t.userType?s&&"Resolved"===s.issueStatus?-1===s.rating?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a.Title,{children:"Issue Rating"}),Object(m.jsx)(U,{issue:s})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a.Title,{children:"Issue Rating"}),Object(m.jsx)(E,{issue:s})]}):Object(m.jsx)(m.Fragment,{}):s.rating>-1?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a.Title,{children:"Issue Rating"}),Object(m.jsx)(E,{issue:s})]}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)(N.a,{onClick:function(){return a.goBack()},children:"Go Back"}),s&&"Deleted"!==s.issueStatus&&"Resolved"!==s.issueStatus?Object(m.jsx)(N.a,{onClick:function(){return q(!0)},children:"Close Issue"}):Object(m.jsx)(m.Fragment,{}),t&&"Staff"===t.userType?s&&"Open"===s.issueStatus?Object(m.jsx)(N.a,{onClick:function(){return function(e){return ne.apply(this,arguments)}(s._id)},children:"Accept Issue"}):s&&"In Progress"===s.issueStatus?Object(m.jsx)(N.a,{onClick:function(){return S(!0)},children:"Resolve Issue"}):Object(m.jsx)(m.Fragment,{}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsxs)(f.a.Footer,{className:"text-muted",children:["Issue Ref: ",s.issueID]})]}),Object(m.jsxs)(B.a,{show:w,onHide:$,children:[Object(m.jsx)(B.a.Header,{children:Object(m.jsx)(B.a.Title,{children:"Resolve Issue"})}),Object(m.jsx)(B.a.Body,{children:Object(m.jsx)(T.a,{children:Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Issue Update"}),Object(m.jsx)(T.a.Control,{name:"description",as:"textarea",placeholder:"Please describe how the issue was resolved",style:{height:"100px"},onChange:ce,required:!0})]})})}),Object(m.jsxs)(B.a.Footer,{children:[Object(m.jsx)(N.a,{variant:"secondary",onClick:$,children:"Go Back"}),Object(m.jsx)(N.a,{variant:"primary",onClick:function(){return function(e){return re.apply(this,arguments)}(s._id)},children:"Submit and Resolve"})]})]}),Object(m.jsxs)(B.a,{show:H,onHide:M,children:[Object(m.jsx)(B.a.Header,{children:Object(m.jsx)(B.a.Title,{children:"Close Issue"})}),Object(m.jsx)(B.a.Body,{children:Object(m.jsx)(T.a,{children:Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Issue Update"}),Object(m.jsx)(T.a.Control,{name:"description",as:"textarea",placeholder:"Please describe why this issue was closed",style:{height:"100px"},onChange:ce,required:!0})]})})}),Object(m.jsxs)(B.a.Footer,{children:[Object(m.jsx)(N.a,{variant:"secondary",onClick:M,children:"Go Back"}),Object(m.jsx)(N.a,{variant:"primary",onClick:function(){return function(e){return ae.apply(this,arguments)}(s._id)},children:"Submit and Close"})]})]})]})})})},H=a(171),q=a(168);a(132);var _=function(e){var t=e.auth,a=e.user;return Object(m.jsx)("div",{children:Object(m.jsx)(H.a,{bg:"dark",variant:"dark",expand:"lg",style:{textAlign:"center"},children:Object(m.jsxs)(x.a,{fluid:!0,children:[Object(m.jsx)(H.a.Brand,{href:"/",style:{margin:"auto"},children:"MessyGoWhere"}),Object(m.jsx)(H.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsx)(H.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsxs)(q.a,{className:"ms-auto",children:[Object(m.jsx)(h.c,{className:"nav-link active",to:"/user/home",children:"Home"}),t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.c,{className:"nav-link active",to:"/api/auth/profile",children:"Profile"}),Object(m.jsx)(h.c,{className:"nav-link active",to:"/case/submit",children:"Submit Issue "}),Object(m.jsx)(h.c,{className:"nav-link active",to:"/vouchers",children:"Vouchers"}),Object(m.jsx)(h.c,{className:"nav-link active",id:"emailnav",to:"/api/auth/profile",children:a&&a.email})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.b,{to:"/api/auth/login",children:Object(m.jsx)(N.a,{variant:"outline-success",children:"Login"})}),Object(m.jsx)(h.b,{to:"/api/auth/register",children:Object(m.jsx)(N.a,{variant:"outline-success",children:"Register"})})]})]})})]})})})};function J(e){var t=e.msg,a=e.type,r=Object(n.useState)(!1),c=Object(b.a)(r,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){t&&(i(!0),setInterval((function(){i(!1)}),2e3))}),[t]),Object(m.jsx)(m.Fragment,{children:s&&Object(m.jsx)("div",{className:"alert alert-".concat(a),children:t})})}a(82);var V=function(e){var t=e.setAuth,a=Object(d.g)(),r=Object(n.useState)(),c=Object(b.a)(r,2),s=c[0],o=c[1],u=Object(n.useState)(""),h=Object(b.a)(u,2),p=h[0],f=h[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),y=g[0],w=g[1],S=Object(n.useState)(),B=Object(b.a)(S,2),P=B[0],F=B[1],A=Object(n.useState)(""),D=Object(b.a)(A,2),L=D[0],R=D[1],G=Object(n.useState)(""),U=Object(b.a)(G,2),E=U[0],z=U[1];function H(){return(H=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),P){e.next=3;break}return e.abrupt("return");case 3:(a=new FileReader).readAsDataURL(P),a.onloadend=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(a.result);case 2:t=e.sent,V(Object(i.a)(Object(i.a)({},s),{},{profilePic:t}));case 4:case"end":return e.stop()}}),e)}))),a.onerror=function(){z("something went wrong!")};case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return _.apply(this,arguments)}function _(){return(_=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({data:t}),e.next=4,k.a.post("/api/auth/upload",a,{headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,r=n.data.url,f(""),w(""),R("Image uploaded successfully"),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),z("Something went wrong!");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/auth/register",n);case 3:r=e.sent,c=r.data.token,localStorage.setItem("token",c),t(!0),a.push("/user/home"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Y(e){o((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))}var $=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){w(t.result)}};return Object(m.jsx)(x.a,{children:Object(m.jsx)(O.a,{className:"d-flex justify-content-center mt-3",children:Object(m.jsxs)(I.a,{md:6,children:[Object(m.jsx)("h3",{children:"Registration Page"}),Object(m.jsxs)(T.a,{onSubmit:function(e){return H.apply(this,arguments)},children:[Object(m.jsx)("h5",{children:"Upload a Profile Pic"}),Object(m.jsx)(J,{msg:E,type:"danger"}),Object(m.jsx)(J,{msg:L,type:"success"}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)("input",{id:"fileInput",type:"file",name:"image",onChange:function(e){var t=e.target.files[0];$(t),F(t),f(e.target.value)},value:p,className:"form-input"}),y&&Object(m.jsx)("img",{src:y,alt:"chosen",style:{height:"300px"}})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Name"}),Object(m.jsx)(T.a.Control,{name:"name",type:"name",placeholder:"Enter name",onChange:Y,required:!0})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Email address"}),Object(m.jsx)(T.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:Y,required:!0}),Object(m.jsx)(T.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Password"}),Object(m.jsx)(T.a.Control,{name:"password",type:"password",placeholder:"Enter Password",onChange:Y,required:!0})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"User Type"}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)(T.a.Check,{inline:!0,label:"User",name:"userType",type:"radio",value:"User",onChange:Y,defaultChecked:!0}),Object(m.jsx)(T.a.Check,{inline:!0,label:"Staff",name:"userType",type:"radio",value:"Staff",onChange:Y})]})]}),Object(m.jsx)(N.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})})};var W=function(e){var t=e.setAuth,a=Object(d.g)(),r=Object(n.useState)({}),c=Object(b.a)(r,2),s=c[0],o=c[1];function u(){return(u=Object(j.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,k.a.post("/api/auth/login",s);case 4:r=e.sent,c=r.data.token,localStorage.setItem("token",c),t(!0),a.push("/user/home"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function h(e){o((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))}return Object(m.jsx)(x.a,{children:Object(m.jsx)(O.a,{className:"d-flex justify-content-center align-content-md-center mt-3",children:Object(m.jsxs)(I.a,{md:6,children:[Object(m.jsx)("h3",{children:"Login"}),Object(m.jsxs)(T.a,{onSubmit:function(e){return u.apply(this,arguments)},children:[Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Email Address"}),Object(m.jsx)(T.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:h,required:!0})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Password"}),Object(m.jsx)(T.a.Control,{name:"password",type:"password",placeholder:"Enter Password",onChange:h,required:!0})]}),Object(m.jsx)(N.a,{variant:"dark",type:"submit",block:!0,children:"Login"})]})]})})})};a(133);var Y=function(e){var t=e.auth,a=Object(d.g)();return Object(n.useEffect)((function(){t&&a.push("/user/home")}),[t]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(x.a,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Encounter an issue??"}),Object(m.jsx)("h3",{children:"And don't know how to resolve it?"}),Object(m.jsx)("h5",{children:"Ask for help here!"})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-self-center flex-column",id:"logindiv",children:[Object(m.jsx)(h.b,{to:"/api/auth/login",children:Object(m.jsx)(N.a,{variant:"dark",children:"Yes I'm in"})}),Object(m.jsx)(h.b,{to:"/api/auth/register",children:Object(m.jsx)(N.a,{variant:"success",children:"Sign up now"})})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-self-center flex-column",children:[Object(m.jsx)(h.b,{to:"/api/auth/login",children:Object(m.jsx)(N.a,{children:"Let us help you"})}),Object(m.jsx)(h.b,{to:"/api/auth/register",children:Object(m.jsx)(N.a,{children:"Register with us"})})]})]})})};var $=function(e){var t=e.user,a=e.setUser,r=e.setAuth,c=Object(n.useState)([]),s=Object(b.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)([]),h=Object(b.a)(u,2),d=h[0],p=h[1];return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/auth/user",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,n=t.data,e.next=7,r(!0);case 7:return e.next=9,a(n.user);case 9:return e.next=11,o(n.user.pendingIssues);case 11:return e.next=13,p(n.user.closedIssues);case 13:e.next=22;break;case 15:return e.prev=15,e.t0=e.catch(0),e.next=19,r(!1);case 19:return e.next=21,a(null);case 21:localStorage.removeItem("token");case 22:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(m.jsxs)(x.a,{children:[Object(m.jsx)("br",{}),Object(m.jsx)(O.a,{}),Object(m.jsx)(O.a,{children:Object(m.jsx)(S,{user:t,pending:i,resolved:d})})]})};var M=function(e){e.auth,e.setAuth,e.user;var t=Object(n.useState)({}),a=Object(b.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),o=i[0],u=i[1],h=Object(n.useState)(""),d=Object(b.a)(h,2),p=d[0],v=d[1],g=Object(n.useState)(""),y=Object(b.a)(g,2),w=y[0],S=y[1],C=Object(n.useState)(""),B=Object(b.a)(C,2),T=B[0],P=B[1],F=[o,p,w,T],A=Object(n.useState)(""),D=Object(b.a)(A,2),L=D[0],R=D[1];Object(n.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/vouchers",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,a=t.data,e.next=7,c(a.availableVouchers.voucherTemplate);case 7:return e.next=9,u(a.voucherACount);case 9:return e.next=11,v(a.voucherBCount);case 11:return e.next=13,S(a.voucherCCount);case 13:return e.next=15,P(a.voucherDCount);case 15:return e.next=17,R(a.userPoints);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var G=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={num:t},e.prev=1,e.next=4,k.a.post("/api/vouchers/buy",a,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 4:return n=e.sent,r=n.data,e.next=8,c(r.availableVouchers.voucherTemplate);case 8:return e.next=10,u(r.voucherACount);case 10:return e.next=12,v(r.voucherBCount);case 12:return e.next=14,S(r.voucherCCount);case 14:return e.next=16,P(r.voucherDCount);case 16:return e.next=18,R(r.userPoints);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={num:t},e.prev=1,e.next=4,k.a.post("/api/vouchers/redeem",a,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 4:return n=e.sent,r=n.data,e.next=8,c(r.availableVouchers.voucherTemplate);case 8:return e.next=10,u(r.voucherACount);case 10:return e.next=12,v(r.voucherBCount);case 12:return e.next=14,S(r.voucherCCount);case 14:return e.next=16,P(r.voucherDCount);case 16:return e.next=18,R(r.userPoints);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(x.a,{children:[Object(m.jsxs)("h4",{children:["You have ",L," point(s)."]}),r.length>0?Object(m.jsx)(O.a,{children:r.map((function(e,t){return Object(m.jsx)(I.a,{md:6,children:Object(m.jsxs)(f.a,{children:[Object(m.jsx)(f.a.Img,{variant:"top",src:e.picture}),Object(m.jsxs)(f.a.Body,{children:[Object(m.jsx)(f.a.Title,{children:e.name}),Object(m.jsxs)(f.a.Text,{children:["This voucher cost ",e.pointsCost,"points",Object(m.jsx)("br",{}),"You have ",F[t]," number of voucher(s)."]}),Object(m.jsx)(N.a,{onClick:function(){return G(t)},variant:"primary",children:"Buy"}),Object(m.jsx)(N.a,{onClick:function(){return U(t)},variant:"primary",children:"Use"})]})]},t)})}))}):Object(m.jsx)("div",{children:"No Vouchers For Sale"})]})},K=a(165);var Q=function(e){var t=e.user;return Object(m.jsxs)(x.a,{children:[Object(m.jsxs)(f.a,{children:[Object(m.jsx)(f.a.Header,{children:"Profile Page"}),Object(m.jsx)("br",{}),Object(m.jsx)(f.a.Img,{variant:"top",src:t.profilePic,style:{width:"80%",margin:"auto"}}),Object(m.jsxs)(f.a.Body,{children:[Object(m.jsx)(f.a.Title,{children:"Name"}),Object(m.jsx)(f.a.Text,{children:t.name}),Object(m.jsx)(f.a.Title,{children:"Email"}),Object(m.jsx)(f.a.Text,{children:t.email})]}),Object(m.jsxs)(f.a.Footer,{children:["User ID: ",t.id]})]}),Object(m.jsx)("br",{})]})},X=a(164);a(134).config();var Z=function(e){var t=e.auth,a=e.setAuth,r=e.user,c=e.setUser,s=e.setEditState,o=Object(d.g)(),u=Object(n.useState)(),h=Object(b.a)(u,2),p=h[0],f=h[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),y=g[0],w=g[1],S=Object(n.useState)(""),B=Object(b.a)(S,2),P=B[0],F=B[1],A=Object(n.useState)(),D=Object(b.a)(A,2),L=D[0],R=D[1],G=Object(n.useState)(""),U=Object(b.a)(G,2),E=U[0],z=U[1],H=Object(n.useState)(""),q=Object(b.a)(H,2),_=q[0],V=q[1],W=Object(n.useState)(),Y=Object(b.a)(W,2),$=Y[0],M=Y[1];function Q(){return(Q=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),L?((a=new FileReader).readAsDataURL(L),a.onloadend=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(a.result);case 2:t=e.sent,te(Object(i.a)(Object(i.a)({},p),{},{profilePic:t}));case 4:case"end":return e.stop()}}),e)}))),a.onerror=function(){V("something went wrong!")},s(!1)):(te(Object(i.a)(Object(i.a)({},p),{},{profilePic:$})),s(!1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({data:t}),e.next=4,k.a.post("/api/auth/upload",a,{headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,r=n.data.public_id,w(""),F(""),z("Image uploaded successfully"),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),V("Something went wrong!");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/auth/update",t,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:n=e.sent,r=n.data.token,localStorage.setItem("token",r),a(!0),o.push("/api/user/home"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ne(e){f((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))}Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/auth/user",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,n=t.data,e.next=7,a(!0);case 7:return e.next=9,c(n.user);case 9:return e.next=11,M(n.user.profilePic);case 11:e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,a(!1);case 17:return e.next=19,c(null);case 19:localStorage.removeItem("token");case 20:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var re=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){F(t.result)}};return Object(m.jsxs)(x.a,{children:[Object(m.jsx)(O.a,{className:"justify-content-center",children:Object(m.jsx)("h3",{children:"Edit Profile"})}),Object(m.jsxs)(O.a,{className:"justify-content-center",children:[Object(m.jsxs)(I.a,{md:4,children:[Object(m.jsx)("h5",{children:"Upload a Profile Pic"}),Object(m.jsx)(J,{msg:_,type:"danger"}),Object(m.jsx)(J,{msg:E,type:"success"}),Object(m.jsxs)(T.a.Group,{children:[L?P&&Object(m.jsx)("img",{src:P,alt:"chosen",style:{height:"150px"}}):Object(m.jsx)(X.a,{src:r.profilePic}),Object(m.jsx)("input",{id:"fileInput",type:"file",name:"image",onChange:function(e){var t=e.target.files[0];re(t),R(t),w(e.target.value)},value:y,className:"form-input"})]})]}),Object(m.jsxs)(I.a,{md:4,children:[Object(m.jsx)("h5",{children:"User ID"}),Object(m.jsx)("p",{children:r.id}),Object(m.jsxs)(T.a,{onSubmit:function(e){return Q.apply(this,arguments)},children:[Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Name"}),Object(m.jsx)(T.a.Control,{name:"name",type:"name",placeholder:r.name,onChange:ne})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Email address"}),Object(m.jsx)(T.a.Control,{name:"email",type:"email",placeholder:r.email,onChange:ne}),Object(m.jsx)(T.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Password"}),Object(m.jsx)(T.a.Control,{name:"password",type:"password",placeholder:"Enter New Password",onChange:ne})]}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"User Type"}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)(T.a.Check,{inline:!0,label:"User",name:"userType",type:"radio",value:"User",onChange:ne,defaultChecked:!0}),Object(m.jsx)(T.a.Check,{inline:!0,label:"Staff",name:"userType",type:"radio",value:"Staff",onChange:ne})]})]}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(N.a,{variant:"primary",type:"submit",children:"Submit"}),Object(m.jsx)(N.a,{variant:"secondary",onClick:function(){return s(!1)},children:"Go Back"})]})]})]})]})]})};var ee=function(e){var t=e.setAuth,a=e.user,r=e.setUser,c=Object(n.useState)(!1),s=Object(b.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)(!1),h=Object(b.a)(u,2),p=h[0],f=h[1],v=function(){return f(!1)},g=Object(d.g)();function y(){return(y=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/auth/delete",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:t(!1),r(null),localStorage.removeItem("token"),g.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/auth/user",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:a=e.sent,n=a.data,t(!0),r(n.user),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),t(!1),r(null),localStorage.removeItem("token");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(m.jsx)(x.a,{fluid:!0,children:Object(m.jsx)(O.a,{children:Object(m.jsxs)(I.a,{md:6,children:[Object(m.jsxs)(O.a,{children:[i?Object(m.jsx)(Z,{setEditState:o,setAuth:t,user:a,setUser:r,exact:!0}):Object(m.jsx)(Q,{user:a}),Object(m.jsxs)(B.a,{show:p,onHide:v,children:[Object(m.jsx)(B.a.Header,{children:Object(m.jsx)(B.a.Title,{children:"Confirm Deletion of Profile"})}),Object(m.jsx)(B.a.Body,{children:'Please click "Delete" below to confirm deletion of profile.'}),Object(m.jsxs)(B.a.Footer,{children:[Object(m.jsx)(N.a,{variant:"secondary",onClick:v,children:"Go Back"}),Object(m.jsx)(N.a,{variant:"primary",onClick:function(){return y.apply(this,arguments)},children:"Confirm Deletion"})]})]})]}),Object(m.jsx)(O.a,{className:"justify-content-center",children:Object(m.jsxs)(K.a,{children:[Object(m.jsx)(N.a,{onClick:function(){return o(!0)},children:"Edit Profile"}),Object(m.jsx)(N.a,{variant:"warning",onClick:function(){t(!1),r(null),localStorage.removeItem("token"),g.push("/")},children:"Log Out"}),Object(m.jsx)(N.a,{variant:"danger",onClick:function(){return f(!0)},children:"Delete Profile"})]})})]})})})};var te=function(e){e.auth,e.setAuth,e.user;var t=Object(d.g)(),a=Object(n.useState)(),r=Object(b.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(""),u=Object(b.a)(o,2),h=u[0],p=u[1],f=Object(n.useState)(""),v=Object(b.a)(f,2),g=v[0],y=v[1],w=Object(n.useState)(),S=Object(b.a)(w,2),B=S[0],P=S[1],F=Object(n.useState)(""),A=Object(b.a)(F,2),D=A[0],L=A[1],R=Object(n.useState)(""),G=Object(b.a)(R,2),U=G[0],E=G[1];function z(){return(z=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),B){e.next=3;break}return e.abrupt("return");case 3:(a=new FileReader).readAsDataURL(B),a.onloadend=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a.result);case 2:t=e.sent,_(Object(i.a)(Object(i.a)({},c),{},{picture:t}));case 4:case"end":return e.stop()}}),e)}))),a.onerror=function(){E("something went wrong!")};case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return q.apply(this,arguments)}function q(){return(q=Object(j.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({data:t}),e.next=4,k.a.post("/api/issue/upload",a,{headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,r=n.data.url,p(""),y(""),L("Image uploaded successfully"),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),E("Something went wrong!");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function _(e){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/issue/submit",a,{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:t.push("/user/home"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function W(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))}var Y=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){y(t.result)}};return Object(m.jsx)(x.a,{children:Object(m.jsx)(O.a,{children:Object(m.jsxs)(I.a,{md:6,children:[Object(m.jsx)("h3",{children:"Issue Submission Page"}),Object(m.jsxs)(T.a,{onSubmit:function(e){return z.apply(this,arguments)},children:[Object(m.jsx)("h5",{children:"Upload a picture of the issue"}),Object(m.jsx)(J,{msg:U,type:"danger"}),Object(m.jsx)(J,{msg:D,type:"success"}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)("input",{id:"fileInput",type:"file",name:"image",onChange:function(e){var t=e.target.files[0];Y(t),P(t),p(e.target.value)},value:h,className:"form-input"}),g&&Object(m.jsx)("img",{src:g,alt:"chosen",style:{height:"300px"}})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Description of Issue"}),Object(m.jsx)(T.a.Control,{name:"description",as:"textarea",placeholder:"Please describe the issue",style:{height:"100px"},onChange:W,required:!0})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Date"}),Object(m.jsx)(T.a.Control,{name:"date",type:"date",onChange:W,required:!0})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Time"}),Object(m.jsx)(T.a.Control,{name:"time",type:"time",onChange:W,required:!0})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Location"}),Object(m.jsx)(T.a.Control,{name:"location",type:"test",placeholder:"Enter Location",onChange:W,required:!0})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)(T.a.Label,{children:"Select Category of Issue"}),Object(m.jsxs)("select",{className:"form-control",onChange:function(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},{issueType:e.target.value})}))},children:[Object(m.jsx)("option",{value:"General",children:"General"}),Object(m.jsx)("option",{value:"Pests",children:"Pests"}),Object(m.jsx)("option",{value:"Animal & Birds",children:"Animal & Birds"}),Object(m.jsx)("option",{value:"Cleanliness",children:"Cleanliness"}),Object(m.jsx)("option",{value:"Roads & Footpaths",children:"Roads & Footpaths"}),Object(m.jsx)("option",{value:"Facilities in HDB",children:"Facilities in HDB"}),Object(m.jsx)("option",{value:"Drinking Water",children:"Drinking Water"}),Object(m.jsx)("option",{value:"Drains & Sewers",children:"Drains & Sewers"}),Object(m.jsx)("option",{value:"Parks & Greenery",children:"Parks & Greenery"}),Object(m.jsx)("option",{value:"Construction Sites",children:"Construction Sites"}),Object(m.jsx)("option",{value:"Abandoned Trolleys",children:"Abandoned Trolleys"}),Object(m.jsx)("option",{value:"Shared Bicycles",children:"Shared Bicycles"}),Object(m.jsx)("option",{value:"Illegal Parking",children:"Illegal Parking"})]})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(T.a.Group,{children:[Object(m.jsx)("br",{}),Object(m.jsx)(O.a,{children:Object(m.jsx)(N.a,{variant:"primary",type:"submit",children:"Submit Issue"})})]})]})]})})})},ae=["auth","Component","path","location"];function ne(e){var t=e.auth,a=e.Component,n=e.path,r=e.location,c=Object(o.a)(e,ae);return Object(m.jsx)(m.Fragment,{children:t?Object(m.jsx)(d.b,{path:n,children:Object(m.jsx)(a,Object(i.a)({},c))}):Object(m.jsx)(d.a,{to:{pathname:"/",state:{from:r}}})})}var re=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),s=Object(b.a)(c,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/auth/user",{headers:{authorization:"Bearer ".concat(localStorage.token)}});case 3:return t=e.sent,a=t.data,e.next=7,r(!0);case 7:return e.next=9,o(a.user);case 9:e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,r(!1);case 15:return e.next=17,o(null);case 17:localStorage.removeItem("token");case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]),Object(m.jsxs)(h.a,{children:[Object(m.jsx)(_,{auth:a,user:i,logout:function(){r(!1),o(null),localStorage.removeItem("token")}}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/",exact:!0,children:Object(m.jsx)(Y,{auth:a})}),Object(m.jsx)(d.b,{path:"/api/auth/login",children:Object(m.jsx)(W,{setAuth:r})}),Object(m.jsx)(d.b,{path:"/api/auth/register",children:Object(m.jsx)(V,{setAuth:r})}),Object(m.jsx)(ne,{auth:a,path:"/user/home",Component:$,user:i,setUser:o,setAuth:r,exact:!0}),Object(m.jsx)(ne,{auth:a,path:"/api/auth/profile",Component:ee,setAuth:r,user:i,setUser:o,exact:!0}),Object(m.jsx)(ne,{auth:a,path:"/cases",Component:S,exact:!0}),Object(m.jsx)(ne,{auth:a,path:"/api/cases/pending/:id",Component:z,user:i,exact:!0}),Object(m.jsx)(ne,{auth:a,path:"/case/submit",Component:te,setAuth:r,user:i,exact:!0}),Object(m.jsx)(ne,{auth:a,path:"/vouchers",Component:M,setAuth:r,user:i,exact:!0}),Object(m.jsx)(d.b,{path:"*",children:"404"})]})]})},ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,174)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(re,{})}),document.getElementById("root")),ce()},82:function(e,t,a){}},[[137,1,2]]]);
//# sourceMappingURL=main.ac254887.chunk.js.map